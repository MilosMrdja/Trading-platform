<div class="max-w-md mx-auto mt-6 p-6 bg-white rounded-lg shadow-md dark:bg-gray-800">
  <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100">
    {{ userToEdit ? 'Edit User' : 'Add User' }}
  </h2>

  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <!-- Name -->
    <div class="mb-4">
      <label for="name" class="block text-gray-700 dark:text-gray-200 mb-1">Name</label>
      <input type="text" id="name" formControlName="name"
             class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"/>
      <div class="text-red-600 mt-1 text-sm" *ngIf="name.invalid && (name.dirty || name.touched)">
        <div *ngIf="name.errors?.['required']">Name is required.</div>
        <div *ngIf="name.errors?.['minlength']">Name must be at least 2 characters.</div>
      </div>
    </div>

    <!-- Email -->
    <div class="mb-4">
      <label for="email" class="block text-gray-700 dark:text-gray-200 mb-1">Email</label>
      <input type="email" id="email" formControlName="email"
             [disabled]="userToEdit != null"
             class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"/>
      <div class="text-red-600 mt-1 text-sm" *ngIf="email.invalid && (email.dirty || email.touched)">
        <div *ngIf="email.errors?.['required']">Email is required.</div>
        <div *ngIf="email.errors?.['email']">Invalid email format.</div>
      </div>
    </div>
    <!-- Password -->
    <div class="mb-4 relative">
      <label for="password" class="block text-gray-700 dark:text-gray-200 mb-1">Password</label>
      <input
        [type]="showPassword ? 'text' : 'password'"
        id="password"
        formControlName="password"
        [disabled]="userToEdit != null"
        class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"/>

      <!-- Toggle button -->
      <button type="button" (click)="showPassword = !showPassword"
              class="absolute right-3 top-9 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
        <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
        </svg>
        <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.27-2.943-9.544-7a10.05 10.05 0 012.676-4.029m3.715-1.867A9.973 9.973 0 0112 5c4.477 0 8.268 2.943 9.542 7a9.973 9.973 0 01-1.706 3.104M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3l18 18" />
        </svg>
      </button>

      <div class="text-red-600 mt-1 text-sm" *ngIf="password.invalid && (password.dirty || password.touched)">
        <div *ngIf="password.errors?.['required']">Password is required.</div>
        <div *ngIf="password.errors?.['minlength']">Password must be at least 6 characters.</div>
      </div>
    </div>


    <!-- Role -->
    <div class="mb-4">
      <label for="role" class="block text-gray-700 dark:text-gray-200 mb-1">Role</label>
      <select id="role" formControlName="role"
              class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
        <option value="">Select role</option>
        <option value="BROKER">BROKER</option>
        <option value="MANAGER">MANAGER</option>
      </select>
      <div class="text-red-600 mt-1 text-sm" *ngIf="role.invalid && (role.dirty || role.touched)">
        <div *ngIf="role.errors?.['required']">Role is required.</div>
      </div>
    </div>

    <button type="submit" [disabled]="userForm.invalid"
            class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
      {{ userToEdit ? 'Update' : 'Add' }}
    </button>
  </form>
</div>

<app-toast></app-toast>
